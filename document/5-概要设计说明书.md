1 引言

### 1.1 编写目的

本概要设计目的是为了解决了实现“快递代拿（FastDeliver）”项目需求的程序模块设计问题。包括如何把该系统划分成若干个模块、决定各个模块之间的接口、模块之间传递的信息，以及数据结构、模块结构的设计等。作为开发人员和测试人员进一步变成和编写测试用例依据。

### 1.2 背景

A. 项目名称是“快递代拿”(FastDeliver)

B. 本项目的任务提出者为软件工程课程快递代拿小组,开发者为该小组中的全部同学,用户为集美大学的在校学生。主要功能是实现用户登录，用户订单，送货员接受订单和订单跟踪，售后订单管理等功能。项目周期为2周。

C. 该软件系统需要与以下系统进行数据交互（TODO）:

* 第三方支付系统:实现学生订单在线支付功能
* 地图导航系统:优化快递

### 1.3 定义（TODO）

### 1.4 参考资料（TODO）

## 2 总体设计

### 2.1 需求规定

#### 2.1.1 用户登录子系统

1. 主要输入

注册信息、登录信息、修改信息。

2. 主要输出

个人主页的信息展示。

3. 主要功能

用户的登录、注册、忘记密码、更改登录信息。

#### 2.1.2 收货地址管理子系统

1. 主要输入

添加收获地址信息、删除收货地址信息、修改收获地址信息

2. 主要输出

选择收货地址

3. 主要功能

添加收获地址、删除收货地址、修改收获地址

#### 2.1.3 余额管理子系统

1. 主要输入

充值信息、交易信息

2. 主要输出

交易记录查询、余额查询

3. 主要功能

充值、交易记录查询、余额查询

#### 2.1.4 订单管理子系统

1. 主要输入

普通用户提交订单信息、普通用户修改订单信息、送货员接受订单信息、送货员更新订单状态信息、后台管理员审核订单信息

2. 主要输出

订单查询、订单跟踪

3. 主要功能

普通用户有关的提交订单、取消订单、订单查询、订单状态查看等功能，与送货员相关的接受订单、订单状态更新、订单查询等功能，与后台管理员相关的订单跟踪、订单审核等功能

### 2.2运行环境

服务器：阿里云轻量型应用服务器vCPU: 2核，内存：1GB，ESSD：40GB

系统：Ubuntu22.04

### 2.3基本设计概念和处理流程（TODO）

用例图

### 2.4 结构

类图

### 2.5 人工处理过程

订单审核，需要后台管理员检查送货员上传的快递照片中的快递单号与用户上传的的快递单号是否一致。

### 2.6 尚未解决的问题

无

## 3 接口设计

### 3.1 用户接口

| 接口名称   | 实现功能           | 调用方法 | 答复      |
| ------ | -------------- | ---- | ------- |
| 登录     | 用户登录           | POST | Boolean |
| 提交订单   | 普通用户提交订单       | POST | Boolean |
| 修改订单   | 修改已提交的订单       | POST | Boolean |
| 注册     | 用户注册           | POST | Boolean |
| 忘记密码   | 用户重置密码         | POST | Boolean |
| 更改登录信息 | 用户修改用户名或密码     | POST | Boolean |
| 添加收获地址 | 普通用户添加新的收获地址   | POST | Boolean |
| 删除收获地址 | 普通用户删除已有的收获地址  | POST | Boolean |
| 修改收获地址 | 普通用户修改已有的收获地址  | POST | Boolean |
| 余额查询   | 用户查看自己的账户余额    | GET  | Number  |
| 交易记录查询 | 用户查看自己的交易历史    | GET  | Array   |
| 充值     | 普通用户向自己的账户充值   | POST | Boolean |
| 取消订单   | 普通普通用户取消已提交的订单 | POST | Boolean |
| 订单查询   | 普通用户或送货员查询订单详情 | GET  | Object  |
| 订单状态查看 | 普通用户查看订单的当前状态  | GET  | String  |
| 接受订单   | 送货员接受待配送的订单    | POST | Boolean |
| 订单状态更新 | 送货员更新订单的配送状态   | POST | Boolean |
| 订单跟踪   | 后台管理员跟踪订单的整个流程 | GET  | Object  |
| 订单审核   | 后台管理员审核订单的合法性  | POST | Boolean |

### 3.2 外部接口

本系统不包含外部接口。

### 3.3 内部接口

系统内部与数据库连接接口为SQL链接

## 4 运行设计

### 4.1 运行模块组合

普通用户：注册模块、登录模块、信息修改模块、提交订单模块、收货地址模块、订单修改模块、订单查询模块、充值模块、余额查询模块。

送货员：注册模块、登录模块、信息修改模块、接受订单模块、订单状态更新模块、订单查询模块、提现模块、余额查询模块。

后台管理员：注册模块、登录模块、信息修改模块、订单审核模块、订单查询模块

### 4.2 运行控制

登录模块需要进行用户名、密码、用户级别的验证。

订单状态更新需要送货员根据送货流程填写。

订单审核需要后台管理员根据订单判断。

## 5 系统数据结构设计

1. 用户表

| 名称   | 标识符          | 数据类型    | 长度  |
| ---- | ------------ | ------- | --- |
| 账号   | account_id   | char    | 10  |
| 昵称   | account_name | varchar | 50  |
| 密码   | password     | char    | 15  |
| 手机号  | phone        | char    | 11  |
| 账号类型 | account_type | int     |     |

2. 交易记录表

| 名称   | 标识符         | 数据类型          | 长度  |
| ---- | ----------- | ------------- | --- |
| 账号   | account_id  | char          | 10  |
| 交易单号 | deal_id     | int           |     |
| 交易时间 | deal_date   | date          |     |
| 交易金额 | deal_amount | decimal(10,2) |     |

3. 余额表

| 名称       | 标识符            | 数据类型 | 长度  |
| -------- | -------------- | ---- | --- |
| 账号       | account_id     | char | 10  |
| 总金额      | total_balance  | int  |     |
| 可提现/支付金额 | active_balance | int  |     |
| 冻结金额     | frozen_balance | int  |     |

4. 地址表

| 名称     | 标识符        | 数据类型    | 长度                                  |
| ------ | ---------- | ------- | ----------------------------------- |
| 账号     | account_id | char    | 10                                  |
| 收货地址   | address    | varchar | varchar |
| 收货人手机号 | phone      | char    | 11                                  |

4. 订单表

| 名称            | 标识符               | 数据类型     | 长度  |
| ------------- | ----------------- | -------- | --- |
| 订单号           | order_id          | int      |     |
| 用户账号          | user_account_id   | char     | 10  |
|               | char              | 10       |     |
| 后台管理员账号       | admin_account_id  | char     | 10  |
| 收获地址          | delivery_address  | varchar  | 100 |
| 收获人姓名         | delivery_name     | varchar  | 20  |
| 收货人电话         | delivery_phone    | char     | 11  |
| 快递驿站位置        | package_address   | varchar  | 100 |
| 取件码           | pickup_code       | char     | 6   |
| 约定金额          | order_amount      | int      |     |
| 订单生成时间        | order_date        | date     |     |
| 订单状态          | order_status      | int      |     |
| 送货员拿到快递时间     | get_package_time  | datetime |     |
| 送货员上传快递单号照片信息 | picture_name      | varchar  | 100 |
| 订单完成时间        | order_finish_time | datetime |     |
| 订单审核时间        | audit_time        | datetime |     |
