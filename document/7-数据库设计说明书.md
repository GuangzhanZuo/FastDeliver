## 1引言

### 1.1编写目的

本软件需求说明书的目的是明确详细地描述“快递代拿（FastDeliver）”项目的结构、功能和操作规则，以便开发人员、维护人员和用户能够深入了解数据库的设计思路和使用方法。文档的目标读者为项目的全体成员，本文档将详细描述中的表结构，以及数据类型等，帮助各成员在其对应模块能正确地定义传输形式。

### 1.2背景

A. 项目名称是“快递代拿”(FastDeliver)
B. 本项目的任务提出者为软件工程课程快递代拿小组,开发者为该小组中的全部同学,用户为集美大学的在校学生。主要功能是实现用户登录，用户订单，送货员接受订单和订单跟踪，售后订单管理等功能。项目周期为2周。
C. 该软件系统需要与以下系统进行数据交互（TODO）:
•    第三方支付系统:实现学生订单在线支付功能
•    地图导航系统:优化快递

### 1.3定义

### 1.4参考资料

2 外部设计

### 2.1标识符和状态

以account_为开头标识的数据名称，均跟用户的基础信息有关；
以address_为开头标识的数据名称，均跟用户的地址信息有关；
以_balance为结尾标识的数据名称，均跟用户的余额信息有关；
以deal_为开头标识的数据名称，均跟用户的交易信息有关。

### 2.2使用它的程序

Mysql5.7，Navicat Premium16，IDEA2020

### 2.3约定

| 字段名            | 解释   | 数据类型        | 是否为空    | 备注    |
| -------------- | ---- | ----------- | ------- | ----- |
| Account_id     | 用户账号 | Char(10)    | No null | PK    |
| account_type   | 用户类型 | VARCHAR(10) | Null    | CHECK |
| deal_id        | 交易单号 | CHAR(10)    | No null | PK    |
| frozen_balance | 冻结金额 | INT         | Null    | FK    |
| Address        | 收货地址 | VARCHAR(10) | Null    | PK    |

—        关键字约束（PK）
—        外键约束(Fk)
—        唯一性约束
—        Check约束（用户自定义约束）
—        非空约束(Not NULL)

### 2.4支持软件

本数据库支持Mysql5.7，Sql Server 19 等数据库管理系统

## 3 结构设计

### ### 3.1概念结构设计

实体名称    实体描写叙述
用户    表示系统或平台的注册用户，可以登录系统并执行特定的操作和功能。
送货员    表负责将商品或货物交付给客户的人员。送货员认为订单的配送和交付提供服务，可以根据需要更新订单状态并记录交付信息。
管理员    具有最高的管理权限，能够查询全部用户的工作记录和其他系统数据。管理员通常负责管理用户账户，审核和授权权限，进行系统设置和维护，并对系统进行监控和报告。
用户表    存储所有注册用户的相关信息，用于验证用户访问权限和记录用户的个人信息。
交易表    记录所有的交易信息，交易表用于追踪和管理用户的交易活动，并支持后续的数据分析和报告。
地址表    存储用户的送货地址信息，用于订单交付时确定送货位置和相关联系信息。
订单表    存储所有用户的订单详细信息，用于跟踪和管理订单的生命周期，支持订单的处理、配送和收款等流程。

### 3.2逻辑结构设计

|           | 表名  | 用户  | 送货员 | 管理员 |
| --------- | --- | --- | --- | --- |
| account   | 用户表 | √   | √   | √   |
| deal      | 交易表 | √   |     | √   |
| balance   | 余额表 | √   | √   | √   |
| address   | 地址表 | √   |     | √   |
| orderlist | 订单表 | √   | √   | √   |

 

### 3.3 物理结构设计

用户表

| 字段名          | 解释    | 数据类型         | 是否为空    | 备注    |
| ------------ | ----- | ------------ | ------- | ----- |
| Account_id   | 用户账号  | Char(10)     | No null | PK    |
| account_name | 用户昵称  | NVARCHAR(20) | Null    |       |
| password     | 用户密码  | VARCHAR(15)  | Null    |       |
| phone        | 用户手机号 | CHAR(11)     | Null    |       |
| account_type | 用户类型  | VARCHAR(10)  | Null    | CHECK |

交易表

| 字段名            | 解释   | 数据类型       | 是否为空    | 备注  |
| -------------- | ---- | ---------- | ------- | --- |
| Account_id     | 用户账号 | Char(10)   | No null | PK  |
| deal_structure | 交易类型 | varchar(4) | Null    |     |
| deal_id        | 交易单号 | CHAR(10)   | No null | PK  |
| deal_amount    | 交易金额 | INT        | Null    |     |
| deal_date      | 交易时间 | DATE       | Null    |     |

余额表

| 字段名            | 解释    | 数据类型     | 是否为空    | 备注  |
| -------------- | ----- | -------- | ------- | --- |
| Account_id     | 用户账号  | Char(10) | No null | PK  |
| total_balance  | 总金额   | INT      | Null    |     |
| active_balance | 可提现金额 | INT      | Null    |     |
| frozen_balance | 冻结金额  | INT      | Null    | FK  |

地址表

| 字段名        | 解释    | 数据类型         | 是否为空    | 备注  |
| ---------- | ----- | ------------ | ------- | --- |
| Account_id | 用户账号  | Char(10)     | No null | PK  |
| name       | 用户昵称  | NVARCHAR(20) | Null    |     |
| phone      | 用户手机号 | CHAR(11)     | Null    |     |
| Address    | 收货地址  | VARCHAR(10)  | Null    | PK  |

订单表

| 字段名                | 解释            | 数据类型         | 是否为空    | 备注    |
| ------------------ | ------------- | ------------ | ------- | ----- |
| order_id           | 订单号           | Char(10)     | No null | PK    |
| account_id         | 用户账号          | Char(10)     | No null |       |
| deliver_account_id | 送货员账号         | Char(10)     | No null |       |
| admin_account_id   | 后台管理员账号       | Char(10)     | No null |       |
| delivery_address   | 收货地址          | VARCHAR(100) | Null    |       |
| delivery_name      | 收货人姓名         | VARCHAR(20)  | Null    |       |
| delivery_phone     | 收货人电话         | CHAR(11)     | No null |       |
| package_address    | 快递驿站位置        | VARCHAR(100) | Null    |       |
| package_code       | 快递单号          | VARCHAR(50)  | Null    |       |
| pickup_code        | 取件码           | VARCHAR(20)  | Null    |       |
| order_amount       | 约定金额          | INT          | Null    |       |
| order_date         | 订单生成时间        | DATE         | Null    |       |
| order_status       | 订单状态          | INT          | Null    | CHECK |
| get_package_time   | 送货员拿到快递时间     | DATE         | Null    |       |
| picture_name       | 送货员上传快递单号照片信息 | VARCHAR(100) | Null    |       |
| order_finish_time  | 订单完成时间        | DATE         | Null    |       |
| audit_time         | 订单审核时间        | DATE         | Null    | FK    |

## 4运用设计

### 4.1数据字典设计

用户管理

| **数据名** | **数据类型** | **说明**          |
| ------- | -------- | --------------- |
| 账号      | INT      | 由系统生成，作为用户的唯一标识 |
| 昵称      | VARCHAR  | 由用户自定义          |
| 密码      | VARCHAR  | 账号验证的依据         |
| 手机号     | VARCHAR  | 作为用户身份验证的依据     |

余额表

| **数据名**  | **数据类型** | **说明**                                      |
| -------- | -------- | ------------------------------------------- |
| 账号       | VARCHAR  | 作为外键与用户表关联，标识该条记录的归属                        |
| 总金额      | INT      | 可提现/支付余额和冻结金额总和                             |
| 可提现/支付金额 | INT      |                                             |
| 冻结金额     | INT      | 用户提交订单后冻结订单相应金额/送货员完成订单后后台管理员订单审核前冻结的订单相应金额 |

交易记录表

| **数据名** | **数据类型** | **说明**                |
| ------- | -------- | --------------------- |
| 交易单号    | INT      | 由系统生成，作为交易记录的唯一标识     |
| 账号      | INT      | 作为外键与用户表关联，该条交易记录的归属方 |
| 交易时间    | DATE     |                       |
| 交易金额    | DATE     |                       |

订单表

| **数据名**       | **数据类型** | **说明**                                           |
| ------------- | -------- | ------------------------------------------------ |
| 订单号           | INT      | 由系统生成，作为订单的唯一标识                                  |
| 用户账号          | INT      | 标识该订单的下单方                                        |
| 送货员账号         | INT      | 标识该订单的送货员方                                       |
| 后台管理员账号       | INT      | 标识该订单的审核方                                        |
| 收获地址          | VARCHAR  |                                                  |
| 收获人姓名         | VARCHAR  |                                                  |
| 收货人电话         | VARCHAR  |                                                  |
| 快递驿站位置        | VARCHAR  |                                                  |
| 取件码           | VARCHAR  |                                                  |
| 约定金额          | INT      |                                                  |
| 订单生成时间        | DATE     |                                                  |
| 订单状态          | INT      | /待接受/待取件/已取件/待审核/订单完成（在“待审核状态下，对普通欧纳古来说时订单完成状态”） |
| 送货员拿到快递时间     | DATE     |                                                  |
| 送货员上传快递单号照片信息 | VARCHAR  |                                                  |
| 订单完成时间        | DATE     | 这只是对普通用户来说的，对送货员来说这个是送达时间                        |
| 订单审核时间        | DATE     |                                                  |

### 4.2安全保密设计

本数据库系统采用安全的用户名加口令方式登录。
